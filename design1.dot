digraph G {
   input [peripheries=2];
   output [peripheries=2];
   protocol [peripheries=2];

   subgraph cluster0 {
      throttle [label="throttle (-R)"];
      outmgt [shape=box];
      throttle -> outmgt [label="?\n(periodic)"];
      label="report";
   }
   integrate [shape=box];

   subgraph cluster2 {
   ticksource [peripheries=2];
   sample [peripheries=2];
   granularity [shape=box];
   ticksource -> granularity [label="t"];
   granularity -> sample [label="t"];
   label="measure";
   }

   input -> parse;
   parse -> integrate [label="+/-"];
   parse -> outmgt [label="?\n(explicit)"];
   parse -> ticksource [label="ticks\n(-t controlled)",style=dotted];
   

   sample -> integrate [label="t,d,f(t)"];
   integrate -> protocol [label="action"];

   ticksource -> throttle [label="t\n(-R :ticks)",style=dotted];
   sample -> throttle [label="d\n(-R :steps)",style=dotted];

   outmgt -> integrate [label="query"];
   integrate -> outmgt [label="status"];

   output -> outmgt [label="ready"];
   outmgt -> output [label="record"];
  
}